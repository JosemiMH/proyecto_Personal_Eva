import{u as S,y as w,a as F,a7 as E,j as e,D as N,a8 as D,b as C,a9 as q,d as z,e as A,B as I,a2 as O,z as P,f as T,aa as H}from"./index-DLF7FulM.js";import{z as r,u as M,t as $,F as L,a as m,b as d,c as u,d as p,I as y,e as x}from"./input-C3GbeGlJ.js";import{T as k}from"./textarea-DCHO7wE_.js";function _({children:n}){const{t}=S(),{toast:g}=w(),[j,o]=F.useState(!1),h=r.object({name:r.string().min(2,"Name required"),email:r.string().email("Invalid email"),phone:r.string().optional(),company:r.string().min(2,"Company required"),message:r.string().min(5,"Challenge details required"),service:r.string().default("Auditoría Estratégica"),privacy:r.literal(!0)}),a=M({resolver:$(h),defaultValues:{name:"",email:"",phone:"",company:"",message:"",service:"Auditoría Estratégica",privacy:!0}}),i=E({mutationFn:async s=>await P({method:"POST",path:"/api/contact",body:s}),onSuccess:()=>{g({title:t("audit.success"),variant:"default"}),o(!1),a.reset()},onError:s=>{let l="Something went wrong. Please try again.";if(s.message){const f=s.message.indexOf("{");if(f!==-1)try{const v=s.message.substring(f),c=JSON.parse(v);c.errors&&Array.isArray(c.errors)&&c.errors.length>0?l=c.errors[0].message:c.message&&(l=c.message)}catch{l=s.message}else l=s.message}g({title:"Error",description:l,variant:"destructive"})}});function b(s){i.mutate(s)}return e.jsxs(N,{open:j,onOpenChange:o,children:[e.jsx(D,{asChild:!0,children:n}),e.jsxs(C,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(z,{children:t("audit.title")}),e.jsx(A,{children:t("audit.description")})]}),e.jsx(L,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(b),className:"space-y-4 py-4",children:[e.jsx(m,{control:a.control,name:"name",render:({field:s})=>e.jsxs(d,{children:[e.jsx(u,{children:t("audit.name")}),e.jsx(p,{children:e.jsx(y,{placeholder:"Eva Pérez",...s})}),e.jsx(x,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(m,{control:a.control,name:"email",render:({field:s})=>e.jsxs(d,{children:[e.jsx(u,{children:t("audit.email")}),e.jsx(p,{children:e.jsx(y,{placeholder:"eva@example.com",...s})}),e.jsx(x,{})]})}),e.jsx(m,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(d,{children:[e.jsx(u,{children:t("audit.phone")}),e.jsx(p,{children:e.jsx(y,{placeholder:"+34 600...",...s})}),e.jsx(x,{})]})})]}),e.jsx(m,{control:a.control,name:"company",render:({field:s})=>e.jsxs(d,{children:[e.jsx(u,{children:t("audit.hotel")}),e.jsx(p,{children:e.jsx(y,{placeholder:"Grand Hotel & Spa...",...s})}),e.jsx(x,{})]})}),e.jsx(m,{control:a.control,name:"message",render:({field:s})=>e.jsxs(d,{children:[e.jsx(u,{children:t("audit.challenge")}),e.jsx(p,{children:e.jsx(k,{placeholder:t("audit.subtitle"),className:"resize-none",...s})}),e.jsx(x,{})]})}),e.jsxs(I,{type:"submit",className:"w-full bg-turquoise hover:bg-turquoise-dark text-white",disabled:i.isPending,children:[i.isPending&&e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),t("audit.submit")]})]})})]})]})}function G({className:n,...t}){return e.jsx("div",{className:T("animate-pulse rounded-md bg-muted",n),...t})}function J({title:n,description:t,image:g,url:j}){const o="https://evaperez-wellness.com",h=j?`${o}${j}`:o,a=`${o}/og-image.jpg`,i=g||a;return e.jsxs(H,{children:[e.jsxs("title",{children:[n," | Eva Pérez - Wellness & Hospitality Strategy"]}),e.jsx("meta",{name:"description",content:t}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:h}),e.jsx("meta",{property:"og:title",content:n}),e.jsx("meta",{property:"og:description",content:t}),e.jsx("meta",{property:"og:image",content:i}),e.jsx("meta",{property:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{property:"twitter:url",content:h}),e.jsx("meta",{property:"twitter:title",content:n}),e.jsx("meta",{property:"twitter:description",content:t}),e.jsx("meta",{property:"twitter:image",content:i})]})}export{_ as A,G as S,J as a};
